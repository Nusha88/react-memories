{"ast":null,"code":"import _slicedToArray from\"/Users/anndvorkina/WebstormProjects/memories-mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{AppBar,Typography,Toolbar,Avatar,Button}from'@material-ui/core';import{Link,useLocation}from'react-router-dom';import{useDispatch}from'react-redux';import decode from'jwt-decode';import{useNavigate}from\"react-router-dom\";import memories from\"../../images/landscape.svg\";// import * as actionType from '../../constants/actionTypes';\nimport useStyles from'./styles';var Navbar=function Navbar(){var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var location=useLocation();var navigate=useNavigate();var classes=useStyles();var logout=function logout(){dispatch({type:'LOGOUT'});navigate('/auth');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/React.createElement(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:classes.brandContainer},/*#__PURE__*/React.createElement(Typography,{className:classes.heading,variant:\"h4\",align:\"center\"},\"Memories\"),/*#__PURE__*/React.createElement(\"img\",{className:classes.image,src:memories,alt:\"icon\",height:\"40\"})),/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},(user===null||user===void 0?void 0:user.result)?/*#__PURE__*/React.createElement(\"div\",{className:classes.profile},/*#__PURE__*/React.createElement(Avatar,{className:classes.purple,alt:user===null||user===void 0?void 0:user.result.name,src:user===null||user===void 0?void 0:user.result.imageUrl},user===null||user===void 0?void 0:user.result.name.charAt(0)),/*#__PURE__*/React.createElement(Typography,{className:classes.userName,variant:\"h6\"},user===null||user===void 0?void 0:user.result.name),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout},\"Logout\")):/*#__PURE__*/React.createElement(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\"},\"Sign In\")));};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","AppBar","Typography","Toolbar","Avatar","Button","Link","useLocation","useDispatch","decode","useNavigate","useStyles","Navbar","JSON","parse","localStorage","getItem","user","setUser","dispatch","location","navigate","classes","logout","type","token","decodedToken","exp","Date","getTime","appBar","brandContainer","heading","image","memories","toolbar","result","profile","purple","name","imageUrl","charAt","userName"],"sources":["/Users/anndvorkina/WebstormProjects/memories-mern/client/src/components/NavBar/Navbar.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {AppBar, Typography, Toolbar, Avatar, Button} from '@material-ui/core';\nimport {Link, useLocation} from 'react-router-dom';\nimport {useDispatch} from 'react-redux';\nimport decode from 'jwt-decode';\nimport {useNavigate} from \"react-router-dom\"\n\nimport memories from '../../images/landscape.svg';\n// import * as actionType from '../../constants/actionTypes';\nimport useStyles from './styles';\n\nconst Navbar = () => {\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const classes = useStyles();\n\n  const logout = () => {\n    dispatch({type: 'LOGOUT'});\n\n    navigate('/auth');\n\n    setUser(null);\n  };\n\n  useEffect(() => {\n    const token = user?.token;\n\n    if (token) {\n      const decodedToken = decode(token);\n\n      if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n    }\n\n    setUser(JSON.parse(localStorage.getItem('profile')));\n  }, [location]);\n\n  return (\n    <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\n      <Link to=\"/\"  className={classes.brandContainer}>\n          <Typography className={classes.heading} variant=\"h4\"\n                      align=\"center\">Memories</Typography>\n          <img className={classes.image} src={memories} alt=\"icon\" height=\"40\"/>\n      </Link>\n      <Toolbar className={classes.toolbar}>\n        {user?.result ? (\n          <div className={classes.profile}>\n            <Avatar className={classes.purple} alt={user?.result.name}\n                    src={user?.result.imageUrl}>{user?.result.name.charAt(0)}</Avatar>\n            <Typography className={classes.userName} variant=\"h6\">{user?.result.name}</Typography>\n            <Button variant=\"contained\" className={classes.logout} color=\"secondary\" onClick={logout}>Logout</Button>\n          </div>\n        ) : (\n          <Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\n        )}\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default Navbar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}