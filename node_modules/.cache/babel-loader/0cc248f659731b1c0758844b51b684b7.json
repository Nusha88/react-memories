{"ast":null,"code":"import _toConsumableArray from\"/Users/anndvorkina/WebstormProjects/memories-mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/anndvorkina/WebstormProjects/memories-mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Container,Grow,Grid,AppBar,TextField,Button,Paper}from'@material-ui/core';import ChipInput from'material-ui-chip-input';import{useDispatch}from'react-redux';import{getPostsBySearch}from'../../actions/posts';import Posts from'../Posts/Posts';import Form from'../Form/Form';import Pagination from'../Pagination';import useStyles from'./styles';import{useLocation,useNavigate}from'react-router-dom';function useQuery(){return new URLSearchParams(useLocation().search);}var Home=function Home(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var dispatch=useDispatch();var classes=useStyles();var query=useQuery();var page=query.get('page')||1;var searchQuery=query.get('searchQuery');var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],setTags=_useState6[1];var navigate=useNavigate();var searchPost=function searchPost(){if(search.trim()||tags){dispatch(getPostsBySearch({search:search,tags:tags.join(',')}));navigate(\"/posts/search?searchQuery=\".concat(search||'none',\"&tags=\").concat(tags.join(',')));}else{navigate('/');}};var handleKeyPress=function handleKeyPress(e){if(e.keyCode===13){searchPost();}};var handleAddChip=function handleAddChip(tag){return setTags([].concat(_toConsumableArray(tags),[tag]));};var handleDeleteChip=function handleDeleteChip(chipToDelete){return setTags(tags.filter(function(tag){return tag!==chipToDelete;}));};return/*#__PURE__*/React.createElement(Grow,{in:true},/*#__PURE__*/React.createElement(Container,{maxWidth:\"xl\"},/*#__PURE__*/React.createElement(Grid,{container:true,justifyContent:\"space-between\",alignItems:\"stretch\",spacing:3,className:classes.gridContainer},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:9},/*#__PURE__*/React.createElement(Posts,{setCurrentId:setCurrentId})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:3},/*#__PURE__*/React.createElement(AppBar,{className:classes.appBarSearch,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(TextField,{onKeyDown:handleKeyPress,name:\"search\",variant:\"outlined\",label:\"Search Memories\",fullWidth:true,value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/React.createElement(ChipInput,{style:{margin:'10px 0'},value:tags,onAdd:function onAdd(chip){return handleAddChip(chip);},onDelete:function onDelete(chip){return handleDeleteChip(chip);},label:\"Search Tags\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(Button,{onClick:searchPost,className:classes.searchButton,variant:\"contained\",color:\"primary\"},\"Search\")),/*#__PURE__*/React.createElement(Form,{currentId:currentId,setCurrentId:setCurrentId}),!searchQuery&&!tags.length&&/*#__PURE__*/React.createElement(Paper,{className:classes.pagination,elevation:6},/*#__PURE__*/React.createElement(Pagination,{page:page}))))));};export default Home;","map":{"version":3,"names":["React","useState","Container","Grow","Grid","AppBar","TextField","Button","Paper","ChipInput","useDispatch","getPostsBySearch","Posts","Form","Pagination","useStyles","useLocation","useNavigate","useQuery","URLSearchParams","search","Home","currentId","setCurrentId","dispatch","classes","query","page","get","searchQuery","setSearch","tags","setTags","navigate","searchPost","trim","join","handleKeyPress","e","keyCode","handleAddChip","tag","handleDeleteChip","chipToDelete","filter","gridContainer","appBarSearch","target","value","margin","chip","searchButton","length","pagination"],"sources":["/Users/anndvorkina/WebstormProjects/memories-mern/client/src/components/Home/Home.js"],"sourcesContent":["import React, { useState} from 'react';\nimport { Container, Grow, Grid, AppBar, TextField, Button, Paper } from '@material-ui/core';\nimport ChipInput from 'material-ui-chip-input';\n\nimport { useDispatch } from 'react-redux';\nimport {getPostsBySearch} from '../../actions/posts';\nimport Posts from '../Posts/Posts';\nimport Form from '../Form/Form';\nimport Pagination from '../Pagination';\nimport useStyles from './styles';\nimport {useLocation, useNavigate} from 'react-router-dom';\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nconst Home = () => {\n  const [currentId, setCurrentId] = useState(0);\n  const dispatch = useDispatch();\n  const classes = useStyles();\n\n  const query = useQuery();\n  const page = query.get('page') || 1;\n  const searchQuery = query.get('searchQuery');\n\n  const [search, setSearch] = useState('');\n  const [tags, setTags] = useState([]);\n  const navigate = useNavigate();\n\n  const searchPost = () => {\n    if (search.trim() || tags) {\n      dispatch(getPostsBySearch({ search, tags: tags.join(',') }));\n      navigate(`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`);\n    } else {\n      navigate('/');\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.keyCode === 13) {\n      searchPost();\n    }\n  };\n\n  const handleAddChip = (tag) => setTags([...tags, tag]);\n\n  const handleDeleteChip = (chipToDelete) => setTags(tags.filter((tag) => tag !== chipToDelete));\n\n  return (\n    <Grow in>\n      <Container maxWidth=\"xl\">\n        <Grid container justifyContent=\"space-between\" alignItems=\"stretch\" spacing={3} className={classes.gridContainer}>\n          <Grid item xs={12} sm={6} md={9}>\n            <Posts setCurrentId={setCurrentId} />\n          </Grid>\n          <Grid item xs={12} sm={6} md={3}>\n            <AppBar className={classes.appBarSearch} position=\"static\" color=\"inherit\">\n              <TextField onKeyDown={handleKeyPress} name=\"search\" variant=\"outlined\" label=\"Search Memories\" fullWidth value={search} onChange={(e) => setSearch(e.target.value)} />\n              <ChipInput\n                style={{ margin: '10px 0' }}\n                value={tags}\n                onAdd={(chip) => handleAddChip(chip)}\n                onDelete={(chip) => handleDeleteChip(chip)}\n                label=\"Search Tags\"\n                variant=\"outlined\"\n              />\n              <Button onClick={searchPost} className={classes.searchButton} variant=\"contained\" color=\"primary\">Search</Button>\n            </AppBar>\n            <Form currentId={currentId} setCurrentId={setCurrentId} />\n            {(!searchQuery && !tags.length) && (\n              <Paper className={classes.pagination} elevation={6}>\n                <Pagination page={page} />\n              </Paper>\n            )}\n          </Grid>\n        </Grid>\n      </Container>\n    </Grow>\n  );\n};\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}